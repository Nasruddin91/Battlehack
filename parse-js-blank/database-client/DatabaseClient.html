

  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.0.min.js"></script>

  <script type="text/javascript">
  Parse.initialize("JgB3okJHjlrUhAaIjLUqs0o53EQdMzTVana6P0Tf", "EXWI6VPTdoGjyfiiJ71ILg17Vlv1ahgIC6ObVyUx");

  /////sign up, return true if successful, return false if not successful///
  userSignUp = function(username, password, email, phone){
    var user = new Parse.User();
    user.set("username", username);
    user.set("password", password);
    user.set("email", email);
     
    // other fields can be set just like with Parse.Object
    user.set("phone", phone);
     
    user.signUp(null, {
      success: function(user) {
        return true;
      },
      error: function(user, error) {
        // Show the error message somewhere and let the user try again.
        alert("Error: " + error.code + " " + error.message);
        return false;
      }
    });

  }

  ////login return id if sucessful
  userLogin = function(username, password){
    Parse.User.logIn(username, password, {
        success: function(user) {
          alert(user.id)
          return true;
        },
        error: function(user, error) {
        alert("Error: " + error.code + " " + error.message);

          return false;
        }
    });
  }

  userLogout = function(){
    Parse.User.logOut();
  }

  createTask = function(name, description, location, category, startingPrice, offerPrice, startDate, endDate, endingBidDate){
      var Task = Parse.Object.extend("Task");
      var task = new Task();

      userObjectId = Parse.User.current().id;

      task.set("userObjectId", userObjectId);
      task.set("name", name);
      task.set("description", description);
      task.set("location", location);
      task.set("category", category);
      task.set("startingPrice", startingPrice);
      task.set("offerPrice", offerPrice);
      task.set("startDate", startDate);
      task.set("endDate", endDate);

      task.set("endingBidDate", endingBidDate);

      task.save(null, {
        success: function(task){
          return true;
        },
        error: function(task, error){
          alert("Error: " + error.code + " " + error.message);
          return false;
        }
      });
  }

  getMyTasks = function(){
    userObjectId = Parse.User.current().id;

    var Task = Parse.Object.extend("Task");
    var query = new Parse.Query(Task);

    query.equalTo("userObjectId", userObjectId);
    query.find({
      success: function(results){
        tasks = [];
        for (var i=0; i< results.length; i++){ 
          t = results[i];
          //console.log(t);
          task = {}
          task["id"] = t.id;
          task["startDate"] = t.get("startDate");
          task["endDate"] = t.get("endDate");
          task["description"] = t.get("description");
          task["name"] = t.get("name");
          task["location"] = t.get("location");
          task["category"] = t.get("category");
          task["endingBidDate"] = t.get("endingBidDate");
          task["offerPrice"] = t.get("offerPrice");
          task["startingPrice"] = t.get("startingPrice"); 
          tasks.push(task);
        }
        console.log(tasks);
        return task;
      },
      error: function(error){
        alert("Error: " + error.code + " " + error.message);
      }
    });
  }




  createBids = function(taskObjectId, bidPrice){

    var Bids = Parse.Object.extend("Bids");
    var bid = new Bids();

    userObjectId = Parse.User.current().id;

    task.set("userObjectId", userObjectId);
    task.set("name", name);
    task.set("description", description);
    task.set("location", location);
    task.set("category", category);
    task.set("startingPrice", startingPrice);
    task.set("offerPrice", offerPrice);
    task.set("startDate", startDate);
    task.set("endDate", endDate);

    task.set("endingBidDate", endingBidDate);

    task.save(null, {
      success: function(task){
        return true;
      },
      error: function(task, error){
        alert("Error: " + error.code + " " + error.message);
        return false;
      }
    });
  }

  test = function(){
    userLogin("nasruddin", "password");
    startDate = new Date("October 13, 2015 11:13:00");
    console.log("startDate: " + startDate);
    endDate = new Date("October 16, 2015 11:13:00");
    console.log("endDate: " + endDate);
    endingBidDate = new Date("October 10, 2015 11:13:00");
    //createTask("swimming", "go swim in the ocean and i'll pay ou one thousand dollars", "pasir ris", "sports", 20,5, startDate, endDate, endingBidDate);
    getMyTasks();
    userLogout();

  }

  test()

</script>
